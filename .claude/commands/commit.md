# コミット作成コマンド

ステージング済みの変更を解析し、チーム規約に沿ったコミットメッセージを作成してコミットします。

---

## 手順

### 1. 変更内容を確認する

以下を実行して現在の状態を把握してください。

```bash
git status
git diff --staged
```

ステージングされた変更がない場合は、ユーザーに「`git add` で対象ファイルをステージしてください」と伝えて終了します。

### 2. コミットメッセージを生成する

変更内容を解析し、以下のフォーマットに従ってコミットメッセージを作成します。

---

## コミットメッセージフォーマット

```
<type>(<scope>): <subject>

<body>
```

### type（必須）

変更の種類を表す英字ラベル。以下から選択します。

| type | 用途 |
|---|---|
| `feat` | 新機能の追加 |
| `fix` | バグ修正 |
| `docs` | ドキュメントのみの変更 |
| `style` | フォーマット変更（動作に影響なし） |
| `refactor` | 機能変更を伴わないリファクタリング |
| `test` | テストの追加・修正 |
| `chore` | ビルド設定・ツール・CI の変更 |

### scope（任意）

変更が影響する範囲を英字小文字で記述します。

例：`user`, `auth`, `api`, `repository`, `service`

### subject（必須）

- **日本語**で変更内容を簡潔に記述する
- 動詞から始める（「追加」「修正」「削除」「更新」など）
- 50文字以内
- 末尾にピリオド不要

### body（任意）

- 変更の「なぜ」を記述する
- 「何を変えたか」より「なぜ変えたか」を重視する
- 箇条書き可

---

## フォーマット例

```
feat(user): ユーザー登録APIを追加

- パスワードは bcrypt でハッシュ化して保存
- バリデーションは Service 層で実施
- Repository への依存は UserRepository に限定
```

```
fix(auth): ログイン失敗時にセッションが残るバグを修正
```

```
refactor(service): UserService を単一責任に分割

肥大化した UserService を AuthService と ProfileService に分離した。
各 Service が独立してテスト可能になった。
```

---

## 3. ユーザー確認を取る

生成したコミットメッセージをユーザーに提示し、承認を得てからコミットを実行します。

承認を得たら以下を実行します。

```bash
git commit -m "<承認されたコミットメッセージ>"
```

## 注意事項

- `--no-verify` オプションは使用しない
- `.env` や機密ファイルがステージされていたら、コミット前に警告してユーザーの判断を仰ぐ
- `git push` はユーザーが明示的に指示した場合のみ実行する

---

$ARGUMENTS が指定された場合は、その内容をコミットメッセージの subject に反映させてください。
